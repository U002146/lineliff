<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é ç´„å«è»Šæœå‹™</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hidden { display: none !important; }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-gray-100 p-0">

    <!-- è¼‰å…¥ç•«é¢ -->
    <div id="loading" class="fixed inset-0 bg-white z-50 flex flex-col items-center justify-center">
        <div class="loader mb-4"></div>
        <p class="text-gray-500 font-bold">æ­£åœ¨é€£ç·š LINE...</p>
        <p id="debug-text" class="text-xs text-gray-400 mt-2">è¼‰å…¥ SDK ä¸­...</p>
    </div>

    <!-- ä¸»å…§å®¹ -->
    <div id="app" class="hidden min-h-screen bg-white">
        <header class="bg-blue-600 p-6 text-white pb-8 rounded-b-3xl shadow-lg">
            <h1 class="text-2xl font-bold">ğŸš• é ç´„å«è»Š</h1>
            <p id="user-name" class="mt-1 opacity-90">Hi, ä¹˜å®¢</p>
        </header>

        <div class="p-6 -mt-4">
            <div class="bg-white rounded-xl shadow-md p-6 border border-gray-100">
                <p class="text-green-600 font-bold text-center text-lg mb-2">ğŸ‰ LIFF åˆå§‹åŒ–æˆåŠŸï¼</p>
                <p class="text-gray-500 text-center text-sm">ç¾åœ¨æ‚¨å¯ä»¥æ­£å¸¸é¡¯ç¤ºç•«é¢äº†</p>
            </div>
            
            <button onclick="liff.closeWindow()" class="w-full mt-6 bg-gray-800 text-white py-4 rounded-xl font-bold">é—œé–‰è¦–çª—</button>
        </div>
    </div>

    <script>
        // âš ï¸ ä½ çš„ ID
        const MY_LIFF_ID = "2008907691-v0O7W8d3";

        // å‹•æ…‹è¼‰å…¥ SDK å‡½å¼ (é€™æ˜¯é—œéµï¼)
        function loadSDK(callback) {
            const script = document.createElement('script');
            script.src = 'https://static.line-scdn.net/liff/edge/2/sdk.js';
            script.charset = 'utf-8';
            script.onload = callback; // ä¸‹è¼‰å®Œæ‰åŸ·è¡Œ callback
            script.onerror = () => alert("SDK ä¸‹è¼‰å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯");
            document.head.appendChild(script);
        }

        // ä¸»ç¨‹å¼
        function main() {
            document.getElementById('debug-text').innerText = "SDK å°±ç·’ï¼ŒåŸ·è¡Œ Init...";
            
            liff.init({ liffId: MY_LIFF_ID })
                .then(() => {
                    document.getElementById('debug-text').innerText = "Init æˆåŠŸï¼";
                    
                    if (!liff.isLoggedIn()) {
                        liff.login();
                        return;
                    }
                    
                    liff.getProfile().then(profile => {
                        document.getElementById('user-name').innerText = "Hi, " + profile.displayName;
                        document.getElementById('loading').classList.add('hidden');
                        document.getElementById('app').classList.remove('hidden');
                    });
                })
                .catch(err => {
                    alert("å•Ÿå‹•éŒ¯èª¤: " + err.message);
                });
        }

        // ğŸš€ ç¨‹å¼å…¥å£ï¼šå…ˆä¸‹è¼‰ SDKï¼Œå†åŸ·è¡Œ main
        window.onload = function() {
            loadSDK(main);
        };
    </script>
</body>
</html>
